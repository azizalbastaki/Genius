#Written by Abdulaziz Albastaki in January 2021
from panda3d.core import BitMask32, AmbientLight, PointLight, DirectionalLight
from objectLib import dock
from water import water
class environment():
    def __init__(self,render,loader):
        self.loader = loader
        def make(x):
            self.fakeWorld = loader.loadModel('assets/environment/arctic/nature/world.bam')
            self.fakeWorld.reparentTo(render)
            self.fakeWorld.setScale(100)
            self.fakeWorld.setSz(10000)
            self.fakeWorld.setZ(-1010)
            self.fakeWorld.setY(x)
            self.fakeWorld.flattenStrong()
        make(0)
        make(90000)
        make(-100000)
        self.river = water(render, loader, (36728.9, 31409.8, -150), 34000, 300000)  # 200,200
        self.world = loader.loadModel('assets/environment/arctic/nature/world.bam')
        self.maximumHeight = 1350  #  4000
        self.world.reparentTo(render)
        self.world.setScale(100)
        self.world.setSz(10000)
        self.world.setZ(-1010)
        self.world.setY(0)
        self.world.setCollideMask(BitMask32.bit(1))
        self.world.hide()
        self.town()
        self.setupLights()


        def generatedMap():
            self.walkway11623 = self.loader.loadModel('assets/environment/arctic/buildings/walkway.bam')
            self.walkway11623.setScale(17)
            self.walkway11623.setPos(45273.71484375, 44900.92578125, -9.174566268920898)
            self.walkway11623.setCollideMask(BitMask32.bit(4))
            self.walkway11623.setH(90.0)
            self.walkway11623.flattenStrong()
            self.walkway11623.reparentTo(render)

            self.walkway12012 = self.loader.loadModel('assets/environment/arctic/buildings/walkway.bam')
            self.walkway12012.setScale(17)
            self.walkway12012.setPos(45273.71484375, 44475.92578125, -9.174566268920898)
            self.walkway12012.setCollideMask(BitMask32.bit(4))
            self.walkway12012.setH(90.0)
            self.walkway12012.flattenStrong()
            self.walkway12012.reparentTo(render)

            self.walkway18829 = self.loader.loadModel('assets/environment/arctic/buildings/walkway.bam')
            self.walkway18829.setScale(17)
            self.walkway18829.setPos(45273.71484375, 43965.92578125, -9.174566268920898)
            self.walkway18829.setCollideMask(BitMask32.bit(4))
            self.walkway18829.setH(90.0)
            self.walkway18829.flattenStrong()
            self.walkway18829.reparentTo(render)

            self.walkway14715 = self.loader.loadModel('assets/environment/arctic/buildings/walkway.bam')
            self.walkway14715.setScale(17)
            self.walkway14715.setPos(45273.71484375, 43540.92578125, -9.174566268920898)
            self.walkway14715.setCollideMask(BitMask32.bit(4))
            self.walkway14715.setH(90.0)
            self.walkway14715.flattenStrong()
            self.walkway14715.reparentTo(render)

            self.walkway19618 = self.loader.loadModel('assets/environment/arctic/buildings/walkway.bam')
            self.walkway19618.setScale(17)
            self.walkway19618.setPos(45273.71484375, 43115.92578125, -9.174566268920898)
            self.walkway19618.setCollideMask(BitMask32.bit(4))
            self.walkway19618.setH(90.0)
            self.walkway19618.flattenStrong()
            self.walkway19618.reparentTo(render)

            self.walkway1255 = self.loader.loadModel('assets/environment/arctic/buildings/walkway.bam')
            self.walkway1255.setScale(17)
            self.walkway1255.setPos(45273.71484375, 45410.92578125, -9.174566268920898)
            self.walkway1255.setCollideMask(BitMask32.bit(4))
            self.walkway1255.setH(90.0)
            self.walkway1255.flattenStrong()
            self.walkway1255.reparentTo(render)

            self.walkway13510 = self.loader.loadModel('assets/environment/arctic/buildings/walkway.bam')
            self.walkway13510.setScale(7)
            self.walkway13510.setPos(45543.71484375, 44645.92578125, -9.174566268920898)
            self.walkway13510.setCollideMask(BitMask32.bit(4))
            self.walkway13510.setH(180.0)
            self.walkway13510.flattenStrong()
            self.walkway13510.reparentTo(render)

            self.building11359 = self.loader.loadModel('assets/environment/arctic/buildings/building1.bam')
            self.building11359.setScale(3)
            self.building11359.setPos(45718.71484375, 44675.92578125, -9.174566268920898)
            self.building11359.setCollideMask(BitMask32.bit(4))
            self.building11359.setH(-89.99999237060547)
            self.building11359.flattenStrong()
            self.building11359.reparentTo(render)

            self.building1_collision8990 = self.loader.loadModel(
                'assets/environment/arctic/buildings/building1collision.bam')
            self.building1_collision8990.setScale(3)
            self.building1_collision8990.setPos(45718.71484375, 44675.92578125, -9.174566268920898)
            self.building1_collision8990.setCollideMask(BitMask32.bit(0))
            self.building1_collision8990.setH(-89.99999237060547)
            self.building1_collision8990.hide()
            self.building1_collision8990.reparentTo(render)

            self.building1_collision7039 = self.loader.loadModel(
                'assets/environment/arctic/buildings/building1collision.bam')
            self.building1_collision7039.setScale(3)
            self.building1_collision7039.setPos(45718.71484375, 43880.92578125, -9.174566268920898)
            self.building1_collision7039.setCollideMask(BitMask32.bit(0))
            self.building1_collision7039.setH(-89.99999237060547)
            self.building1_collision7039.hide()
            self.building1_collision7039.reparentTo(render)

            self.building17106 = self.loader.loadModel('assets/environment/arctic/buildings/building1.bam')
            self.building17106.setScale(3)
            self.building17106.setPos(45718.71484375, 43880.92578125, -9.174566268920898)
            self.building17106.setCollideMask(BitMask32.bit(4))
            self.building17106.setH(-89.99999237060547)
            self.building17106.flattenStrong()
            self.building17106.reparentTo(render)

            self.walkway11242 = self.loader.loadModel('assets/environment/arctic/buildings/walkway.bam')
            self.walkway11242.setScale(6)
            self.walkway11242.setPos(45508.71484375, 43850.92578125, -9.174566268920898)
            self.walkway11242.setCollideMask(BitMask32.bit(4))
            self.walkway11242.setH(6.830189249740215e-06)
            self.walkway11242.flattenStrong()
            self.walkway11242.reparentTo(render)

            self.tree11439 = self.loader.loadModel('assets/environment/arctic/nature/tree.bam')
            self.tree11439.setScale(11)
            self.tree11439.setPos(45663.71484375, 44385.92578125, -9.174566268920898)
            self.tree11439.setH(6.830189249740215e-06)
            self.tree11439.flattenStrong()
            self.tree11439.reparentTo(render)

            self.tree13829 = self.loader.loadModel('assets/environment/arctic/nature/tree.bam')
            self.tree13829.setScale(11)
            self.tree13829.setPos(45663.71484375, 44110.92578125, -9.174566268920898)
            self.tree13829.setH(6.830189249740215e-06)
            self.tree13829.flattenStrong()
            self.tree13829.reparentTo(render)

            self.tree12329 = self.loader.loadModel('assets/environment/arctic/nature/tree.bam')
            self.tree12329.setScale(11)
            self.tree12329.setPos(45553.71484375, 44220.92578125, -9.174566268920898)
            self.tree12329.setH(6.830189249740215e-06)
            self.tree12329.flattenStrong()
            self.tree12329.reparentTo(render)

            self.tree15158 = self.loader.loadModel('assets/environment/arctic/nature/tree.bam')
            self.tree15158.setScale(11)
            self.tree15158.setPos(45718.71484375, 44220.92578125, -9.174566268920898)
            self.tree15158.setH(6.830189249740215e-06)
            self.tree15158.flattenStrong()
            self.tree15158.reparentTo(render)

            self.tree11804 = self.loader.loadModel('assets/environment/arctic/nature/tree.bam')
            self.tree11804.setScale(11)
            self.tree11804.setPos(45773.71484375, 44330.92578125, -9.174566268920898)
            self.tree11804.setH(6.830189249740215e-06)
            self.tree11804.flattenStrong()
            self.tree11804.reparentTo(render)

            self.tree1530 = self.loader.loadModel('assets/environment/arctic/nature/tree.bam')
            self.tree1530.setScale(11)
            self.tree1530.setPos(45773.71484375, 44440.92578125, -9.174566268920898)
            self.tree1530.setH(6.830189249740215e-06)
            self.tree1530.flattenStrong()
            self.tree1530.reparentTo(render)

            self.tree11037 = self.loader.loadModel('assets/environment/arctic/nature/tree.bam')
            self.tree11037.setScale(11)
            self.tree11037.setPos(45883.71484375, 44440.92578125, -9.174566268920898)
            self.tree11037.setH(6.830189249740215e-06)
            self.tree11037.flattenStrong()
            self.tree11037.reparentTo(render)

            self.tree14402 = self.loader.loadModel('assets/environment/arctic/nature/tree.bam')
            self.tree14402.setScale(11)
            self.tree14402.setPos(45883.71484375, 44495.92578125, -9.174566268920898)
            self.tree14402.setH(6.830189249740215e-06)
            self.tree14402.flattenStrong()
            self.tree14402.reparentTo(render)

            self.tree19002 = self.loader.loadModel('assets/environment/arctic/nature/tree.bam')
            self.tree19002.setScale(11)
            self.tree19002.setPos(45883.71484375, 44275.92578125, -9.174566268920898)
            self.tree19002.setH(6.830189249740215e-06)
            self.tree19002.flattenStrong()
            self.tree19002.reparentTo(render)

            self.tree14065 = self.loader.loadModel('assets/environment/arctic/nature/tree.bam')
            self.tree14065.setScale(11)
            self.tree14065.setPos(45883.71484375, 44165.92578125, -9.174566268920898)
            self.tree14065.setH(6.830189249740215e-06)
            self.tree14065.flattenStrong()
            self.tree14065.reparentTo(render)

        generatedMap()

    def setupLights(self):
        ambiet = AmbientLight('ambient')
        ambiet.setColor((0.2,0.2,0.2,1))
        alight = render.attachNewNode(ambiet)
        render.setLight(alight)
        dlight = DirectionalLight('dlight')
        dlight.setColor((0.8, 0.8, 0.8, 1))
        dlnp = render.attachNewNode(dlight)
        dlnp.setHpr(0, -45, 0)
        render.setLight(dlnp)
    def town(self):
        port = dock(self.loader,(45150, 42978.6, 30))
